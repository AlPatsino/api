# Платформа откликов

## Введение

Платформа откликов нужна для обеспечения удобной интеграции карьерного сайта клиента с Хантфлоу.

Это достигается путем предоставления типизированных методов API карьерного сайта клиента, которые платформа использует для публикации вакансий и сбора откликов. При этом достигается минимальная связность карьерного сайта с внешней ATS (потребителем методов API может быть любой другой сервис).

Подразумевается, что карьерный сайт будет иметь token-based или HTTP-Basic аутентификацию, а также весь обмен будет проходить по защищенному каналу (HTTPS).

## Обработка ошибок

Положительным результатом запроса считается код ответа 200 или 204, а также тело ответа в соответствии с ожидаемым результатом.

Любые другие коды ответов обрабатываются как ошибки. При этом, помимо кода ответа, в теле ответа ожидается дополнительная информация, позволяющая понять причину ошибки в формате:
 
```json
{
    "errors": {
        "common": [
          "Some common error that not related to a specific request field"
        ],
        "position": [
          "Vacancy position is a required field"
        ]
    }
}
```

## Перечень методов

* [Публикация вакансии](#publication)
* [Редактирование вакансии](#edit)
* [Снятие вакансии с публикации](#unpublish)


<a name="publication"></a>
## Публикация вакансии

`POST /publish`

В теле запроса будет передан JSON вида:

```json
{
    "position": "Python developer",
    "body": "<p>Пишу я вам, чего же <strong>боле</strong></p>",
    "requirements": "<p>Что я могу ещё <strong>сказать</strong></p>",
    "conditions": "<p>Теперь я знаю в вашей воле <strong>воле</strong></p>",
    "some_dictionary": {
      "name": "Отдел разработки",
      "foreign": "external_id"
    }
}
```

Полный набор передаваемых данных обсуждается при внедрении и зависит от требований клиента.

Ожидаемый ответ – идентификатор созданной вакансии на карьерном сайте:

```json
{
    "id": 1
}
```

Далее этот идентификатор будет использоваться для редактирования, снятия с публикации и получения откликов.


<a name="edit"></a>
## Редактирование вакансии

`PUT /vacancy/{vacancy_id}`

где `{vacancy_id}` – идентификатор вакансии на карьерном сайте, полученный ранее при публикации.

В теле запроса будет передан JSON вида (аналогичный публикации):

```json
{
    "position": "Python developer",
    "body": "<p>Пишу я вам, чего же <strong>боле</strong></p>",
    "requirements": "<p>Что я могу ещё <strong>сказать</strong></p>",
    "conditions": "<p>Теперь я знаю в вашей воле <strong>воле</strong></p>",
    "some_dictionary": {
      "name": "Отдел разработки",
      "foreign": "external_id"
    }
}
```

Ожидаемый ответ: HTTP-код 200 или 204. Тело ответа игнорируется.

<a name="unpublish"></a>
## Снятие вакансии с публикации

`DELETE /vacancy/{vacancy_id}`

где `{vacancy_id}` – идентификатор вакансии на карьерном сайте, полученный ранее при публикации.

Ожидаемый ответ: HTTP-код 200 или 204. Тело ответа игнорируется.
